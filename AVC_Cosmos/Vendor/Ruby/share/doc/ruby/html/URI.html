<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module URI - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#module-URI-label-Features">Features</a>
    <li><a href="#module-URI-label-Basic+example">Basic example</a>
    <li><a href="#module-URI-label-Adding+custom+URIs">Adding custom URIs</a>
    <li><a href="#module-URI-label-RFC+References">RFC References</a>
    <li><a href="#module-URI-label-Class+tree">Class tree</a>
    <li><a href="#module-URI-label-Copyright+Info">Copyright Info</a>
  </ul>
</div>


  <div id="class-metadata">
    
    
    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="URI/REGEXP.html">URI::REGEXP</a>
  
  
  </ul>
</div>

    <div id="extends-section" class="nav-section">
  <h3>Extended With Modules</h3>

  <ul class="link-list">
    
  
    <li><a class="extend" href="URI/Escape.html">URI::Escape</a>
  
  
  </ul>
</div>

    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-decode_www_form">::decode_www_form</a>
    
    <li ><a href="#method-c-decode_www_form_component">::decode_www_form_component</a>
    
    <li ><a href="#method-c-encode_www_form">::encode_www_form</a>
    
    <li ><a href="#method-c-encode_www_form_component">::encode_www_form_component</a>
    
    <li ><a href="#method-c-extract">::extract</a>
    
    <li ><a href="#method-c-join">::join</a>
    
    <li ><a href="#method-c-parse">::parse</a>
    
    <li ><a href="#method-c-regexp">::regexp</a>
    
    <li ><a href="#method-c-scheme_list">::scheme_list</a>
    
    <li ><a href="#method-c-split">::split</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-URI">
  <h1 id="module-URI" class="module">
    module URI
  </h1>

  <section class="description">
    
<p><a href="URI.html">URI</a> is a module providing classes to handle Uniform
Resource Identifiers (<a
href="http://tools.ietf.org/html/rfc2396">RFC2396</a>)</p>

<h2 id="module-URI-label-Features">Features<span><a href="#module-URI-label-Features">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>Uniform handling of handling URIs</p>
</li><li>
<p>Flexibility to introduce custom <a href="URI.html">URI</a> schemes</p>
</li><li>
<p>Flexibility to have an alternate <a href="URI.html#Parser">URI::Parser</a>
(or just different patterns and regexp&#39;s)</p>
</li></ul>

<h2 id="module-URI-label-Basic+example">Basic example<span><a href="#module-URI-label-Basic+example">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>require &#39;uri&#39;

uri = URI(&quot;http://foo.com/posts?id=30&amp;limit=5#time=1305298413&quot;)
#=&gt; #&lt;URI::HTTP:0x00000000b14880
      URL:http://foo.com/posts?id=30&amp;limit=5#time=1305298413&gt;
uri.scheme
#=&gt; &quot;http&quot;
uri.host
#=&gt; &quot;foo.com&quot;
uri.path
#=&gt; &quot;/posts&quot;
uri.query
#=&gt; &quot;id=30&amp;limit=5&quot;
uri.fragment
#=&gt; &quot;time=1305298413&quot;

uri.to_s
#=&gt; &quot;http://foo.com/posts?id=30&amp;limit=5#time=1305298413&quot;</pre>

<h2 id="module-URI-label-Adding+custom+URIs">Adding custom URIs<span><a href="#module-URI-label-Adding+custom+URIs">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>module URI
  class RSYNC &lt; Generic
    DEFAULT_PORT = 873
  end
  @@schemes[&#39;RSYNC&#39;] = RSYNC
end
#=&gt; URI::RSYNC

URI.scheme_list
#=&gt; {&quot;FTP&quot;=&gt;URI::FTP, &quot;HTTP&quot;=&gt;URI::HTTP, &quot;HTTPS&quot;=&gt;URI::HTTPS,
     &quot;LDAP&quot;=&gt;URI::LDAP, &quot;LDAPS&quot;=&gt;URI::LDAPS, &quot;MAILTO&quot;=&gt;URI::MailTo,
     &quot;RSYNC&quot;=&gt;URI::RSYNC}

uri = URI(&quot;rsync://rsync.foo.com&quot;)
#=&gt; #&lt;URI::RSYNC:0x00000000f648c8 URL:rsync://rsync.foo.com&gt;</pre>

<h2 id="module-URI-label-RFC+References">RFC References<span><a href="#module-URI-label-RFC+References">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>A good place to view an RFC spec is <a
href="http://www.ietf.org/rfc.html">www.ietf.org/rfc.html</a></p>

<p>Here is a list of all related RFC&#39;s.</p>
<ul><li>
<p><a href="http://tools.ietf.org/html/rfc822">RFC822</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc1738">RFC1738</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc2255">RFC2255</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc2368">RFC2368</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc2373">RFC2373</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc2396">RFC2396</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc2732">RFC2732</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc3986">RFC3986</a></p>
</li></ul>

<h2 id="module-URI-label-Class+tree"><a href="Class.html">Class</a> tree<span><a href="#module-URI-label-Class+tree">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a href="URI/Generic.html">URI::Generic</a> (in uri/generic.rb)</p>
<ul><li>
<p><a href="URI/FTP.html">URI::FTP</a> - (in uri/ftp.rb)</p>
</li><li>
<p><a href="URI/HTTP.html">URI::HTTP</a> - (in uri/http.rb)</p>
<ul><li>
<p><a href="URI/HTTPS.html">URI::HTTPS</a> - (in uri/https.rb)</p>
</li></ul>
</li><li>
<p><a href="URI/LDAP.html">URI::LDAP</a> - (in uri/ldap.rb)</p>
<ul><li>
<p><a href="URI/LDAPS.html">URI::LDAPS</a> - (in uri/ldaps.rb)</p>
</li></ul>
</li><li>
<p><a href="URI/MailTo.html">URI::MailTo</a> - (in uri/mailto.rb)</p>
</li></ul>
</li><li>
<p><a href="URI.html#Parser">URI::Parser</a> - (in uri/common.rb)</p>
</li><li>
<p><a href="URI/REGEXP.html">URI::REGEXP</a> - (in uri/common.rb)</p>
<ul><li>
<p>URI::REGEXP::PATTERN - (in uri/common.rb)</p>
</li></ul>
</li><li>
<p>URI::Util - (in uri/common.rb)</p>
</li><li>
<p><a href="URI/Escape.html">URI::Escape</a> - (in uri/common.rb)</p>
</li><li>
<p><a href="URI/Error.html">URI::Error</a> - (in uri/common.rb)</p>
<ul><li>
<p><a href="URI/InvalidURIError.html">URI::InvalidURIError</a> - (in
uri/common.rb)</p>
</li><li>
<p><a href="URI/InvalidComponentError.html">URI::InvalidComponentError</a> -
(in uri/common.rb)</p>
</li><li>
<p><a href="URI/BadURIError.html">URI::BadURIError</a> - (in uri/common.rb)</p>
</li></ul>
</li></ul>

<h2 id="module-URI-label-Copyright+Info">Copyright Info<span><a href="#module-URI-label-Copyright+Info">&para;</a> <a href="#top">&uarr;</a></span></h2>
<dl class="rdoc-list note-list"><dt>Author
<dd>
<p>Akira Yamada &lt;akira@ruby-lang.org&gt;</p>
</dd><dt>Documentation
<dd>
<p>Akira Yamada &lt;akira@ruby-lang.org&gt; Dmitry V. Sabanin
&lt;sdmitry@lrn.ru&gt; Vincent Batts &lt;vbatts@hashbangbash.com&gt;</p>
</dd><dt>License
<dd>
<p>Copyright Â© 2001 akira yamada &lt;akira@ruby-lang.org&gt; You can
redistribute it and/or modify it under the same term as Ruby.</p>
</dd><dt>Revision
<dd>
<p>$Id: uri.rb 53141 2015-12-16 05:07:31Z naruse $</p>
</dd></dl>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="DEFAULT_PARSER">DEFAULT_PARSER
        
        <dd><p>URI::Parser.new</p>
        
      
        <dt id="Parser">Parser
        
        <dd>
        
      
        <dt id="REGEXP">REGEXP
        
        <dd>
        
      
        <dt id="RFC3986_PARSER">RFC3986_PARSER
        
        <dd>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-decode_www_form" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">decode_www_form</span><span
            class="method-args">(str, enc=Encoding::UTF_8, separator: '&', use__charset_: false, isindex: false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Decode URL-encoded form data from given <code>str</code>.</p>

<p>This decodes application/x-www-form-urlencoded data and returns array of
key-value array.</p>

<p>This refers <a
href="http://url.spec.whatwg.org/#concept-urlencoded-parser">url.spec.whatwg.org/#concept-urlencoded-parser</a>
, so this supports only &amp;-separator, don&#39;t support ;-separator.</p>

<pre class="ruby"><span class="ruby-identifier">ary</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">decode_www_form</span>(<span class="ruby-string">&quot;a=1&amp;a=2&amp;b=3&quot;</span>)
<span class="ruby-identifier">p</span> <span class="ruby-identifier">ary</span>                  <span class="ruby-comment">#=&gt; [[&#39;a&#39;, &#39;1&#39;], [&#39;a&#39;, &#39;2&#39;], [&#39;b&#39;, &#39;3&#39;]]</span>
<span class="ruby-identifier">p</span> <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">assoc</span>(<span class="ruby-string">&#39;a&#39;</span>).<span class="ruby-identifier">last</span>  <span class="ruby-comment">#=&gt; &#39;1&#39;</span>
<span class="ruby-identifier">p</span> <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">assoc</span>(<span class="ruby-string">&#39;b&#39;</span>).<span class="ruby-identifier">last</span>  <span class="ruby-comment">#=&gt; &#39;3&#39;</span>
<span class="ruby-identifier">p</span> <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">rassoc</span>(<span class="ruby-string">&#39;a&#39;</span>).<span class="ruby-identifier">last</span> <span class="ruby-comment">#=&gt; &#39;2&#39;</span>
<span class="ruby-identifier">p</span> <span class="ruby-constant">Hash</span>[<span class="ruby-identifier">ary</span>]            <span class="ruby-comment"># =&gt; {&quot;a&quot;=&gt;&quot;2&quot;, &quot;b&quot;=&gt;&quot;3&quot;}</span>
</pre>

<p>See <a
href="URI.html#method-c-decode_www_form_component">::decode_www_form_component</a>,
<a href="URI.html#method-c-encode_www_form">::encode_www_form</a></p>
          
          

          
          <div class="method-source-code" id="decode_www_form-source">
            <pre><span class="ruby-comment"># File lib/uri/common.rb, line 453</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">decode_www_form</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">enc</span>=<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>, <span class="ruby-identifier">separator</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;&amp;&#39;</span>, <span class="ruby-identifier">use__charset_</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>, <span class="ruby-identifier">isindex</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;the input of #{self.name}.#{__method__} must be ASCII only string&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">ascii_only?</span>
  <span class="ruby-identifier">ary</span> = []
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">ary</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">enc</span> = <span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">enc</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">b</span>.<span class="ruby-identifier">each_line</span>(<span class="ruby-identifier">separator</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">string</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">string</span>.<span class="ruby-identifier">chomp!</span>(<span class="ruby-identifier">separator</span>)
    <span class="ruby-identifier">key</span>, <span class="ruby-identifier">sep</span>, <span class="ruby-identifier">val</span> = <span class="ruby-identifier">string</span>.<span class="ruby-identifier">partition</span>(<span class="ruby-string">&#39;=&#39;</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">isindex</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">sep</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">val</span> = <span class="ruby-identifier">key</span>
        <span class="ruby-identifier">key</span> = <span class="ruby-string">&#39;&#39;</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">isindex</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">use__charset_</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;_charset_&#39;</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">e</span> = <span class="ruby-identifier">get_encoding</span>(<span class="ruby-identifier">val</span>)
      <span class="ruby-identifier">enc</span> = <span class="ruby-identifier">e</span>
      <span class="ruby-identifier">use__charset_</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">key</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/\+|%\h\h/</span>, <span class="ruby-constant">TBLDECWWWCOMP_</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">val</span>
      <span class="ruby-identifier">val</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/\+|%\h\h/</span>, <span class="ruby-constant">TBLDECWWWCOMP_</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">val</span> = <span class="ruby-string">&#39;&#39;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">ary</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">key</span>, <span class="ruby-identifier">val</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">k</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-identifier">enc</span>)
    <span class="ruby-identifier">k</span>.<span class="ruby-identifier">scrub!</span>
    <span class="ruby-identifier">v</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-identifier">enc</span>)
    <span class="ruby-identifier">v</span>.<span class="ruby-identifier">scrub!</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">ary</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-decode_www_form_component" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">decode_www_form_component</span><span
            class="method-args">(str, enc=Encoding::UTF_8)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Decode given <code>str</code> of URL-encoded form data.</p>

<p>This decodes + to SP.</p>

<p>See <a
href="URI.html#method-c-encode_www_form_component">::encode_www_form_component</a>,
<a href="URI.html#method-c-decode_www_form">::decode_www_form</a></p>
          
          

          
          <div class="method-source-code" id="decode_www_form_component-source">
            <pre><span class="ruby-comment"># File lib/uri/common.rb, line 385</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">decode_www_form_component</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">enc</span>=<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;invalid %-encoding (#{str})&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-regexp">/%(?!\h\h)/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">str</span>
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">b</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\+|%\h\h/</span>, <span class="ruby-constant">TBLDECWWWCOMP_</span>).<span class="ruby-identifier">force_encoding</span>(<span class="ruby-identifier">enc</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-encode_www_form" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">encode_www_form</span><span
            class="method-args">(enum, enc=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Generate URL-encoded form data from given <code>enum</code>.</p>

<p>This generates application/x-www-form-urlencoded data defined in HTML5 from
given an <a href="Enumerable.html">Enumerable</a> object.</p>

<p>This internally uses <a
href="URI.html#method-c-encode_www_form_component">::encode_www_form_component</a>.</p>

<p>This method doesn&#39;t convert the encoding of given items, so convert
them before call this method if you want to send data as other than
original encoding or mixed encoding data. (Strings which are encoded in an
HTML5 ASCII incompatible encoding are converted to UTF-8.)</p>

<p>This method doesn&#39;t handle files.  When you send a file, use
multipart/form-data.</p>

<p>This refers <a
href="http://url.spec.whatwg.org/#concept-urlencoded-serializer">url.spec.whatwg.org/#concept-urlencoded-serializer</a></p>

<pre class="ruby"><span class="ruby-constant">URI</span>.<span class="ruby-identifier">encode_www_form</span>([[<span class="ruby-string">&quot;q&quot;</span>, <span class="ruby-string">&quot;ruby&quot;</span>], [<span class="ruby-string">&quot;lang&quot;</span>, <span class="ruby-string">&quot;en&quot;</span>]])
<span class="ruby-comment">#=&gt; &quot;q=ruby&amp;lang=en&quot;</span>
<span class="ruby-constant">URI</span>.<span class="ruby-identifier">encode_www_form</span>(<span class="ruby-string">&quot;q&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;ruby&quot;</span>, <span class="ruby-string">&quot;lang&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;en&quot;</span>)
<span class="ruby-comment">#=&gt; &quot;q=ruby&amp;lang=en&quot;</span>
<span class="ruby-constant">URI</span>.<span class="ruby-identifier">encode_www_form</span>(<span class="ruby-string">&quot;q&quot;</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">&quot;ruby&quot;</span>, <span class="ruby-string">&quot;perl&quot;</span>], <span class="ruby-string">&quot;lang&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;en&quot;</span>)
<span class="ruby-comment">#=&gt; &quot;q=ruby&amp;q=perl&amp;lang=en&quot;</span>
<span class="ruby-constant">URI</span>.<span class="ruby-identifier">encode_www_form</span>([[<span class="ruby-string">&quot;q&quot;</span>, <span class="ruby-string">&quot;ruby&quot;</span>], [<span class="ruby-string">&quot;q&quot;</span>, <span class="ruby-string">&quot;perl&quot;</span>], [<span class="ruby-string">&quot;lang&quot;</span>, <span class="ruby-string">&quot;en&quot;</span>]])
<span class="ruby-comment">#=&gt; &quot;q=ruby&amp;q=perl&amp;lang=en&quot;</span>
</pre>

<p>See <a
href="URI.html#method-c-encode_www_form_component">::encode_www_form_component</a>,
<a href="URI.html#method-c-decode_www_form">::decode_www_form</a></p>
          
          

          
          <div class="method-source-code" id="encode_www_form-source">
            <pre><span class="ruby-comment"># File lib/uri/common.rb, line 417</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">encode_www_form</span>(<span class="ruby-identifier">enum</span>, <span class="ruby-identifier">enc</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">enum</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">encode_www_form_component</span>(<span class="ruby-identifier">k</span>, <span class="ruby-identifier">enc</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:to_ary</span>)
      <span class="ruby-identifier">v</span>.<span class="ruby-identifier">to_ary</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">w</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">str</span> = <span class="ruby-identifier">encode_www_form_component</span>(<span class="ruby-identifier">k</span>, <span class="ruby-identifier">enc</span>)
        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">w</span>.<span class="ruby-identifier">nil?</span>
          <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;=&#39;</span>
          <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encode_www_form_component</span>(<span class="ruby-identifier">w</span>, <span class="ruby-identifier">enc</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;&amp;&#39;</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">str</span> = <span class="ruby-identifier">encode_www_form_component</span>(<span class="ruby-identifier">k</span>, <span class="ruby-identifier">enc</span>)
      <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;=&#39;</span>
      <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encode_www_form_component</span>(<span class="ruby-identifier">v</span>, <span class="ruby-identifier">enc</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;&amp;&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-encode_www_form_component" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">encode_www_form_component</span><span
            class="method-args">(str, enc=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Encode given <code>str</code> to URL-encoded form data.</p>

<p>This method doesn&#39;t convert *, -, ., 0-9, A-Z, _, a-z, but does convert
SP (ASCII space) to + and converts others to %XX.</p>

<p>If <code>enc</code> is given, convert <code>str</code> to the encoding
before percent encoding.</p>

<p>This is an implementation of <a
href="http://www.w3.org/TR/2013/CR-html5-20130806/forms.html#url-encoded-form-data">www.w3.org/TR/2013/CR-html5-20130806/forms.html#url-encoded-form-data</a></p>

<p>See <a
href="URI.html#method-c-decode_www_form_component">::decode_www_form_component</a>,
<a href="URI.html#method-c-encode_www_form">::encode_www_form</a></p>
          
          

          
          <div class="method-source-code" id="encode_www_form_component-source">
            <pre><span class="ruby-comment"># File lib/uri/common.rb, line 367</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">encode_www_form_component</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">enc</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">str</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">encoding</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">enc</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">enc</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>
      <span class="ruby-identifier">str</span>.<span class="ruby-identifier">encode!</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>, <span class="ruby-identifier">invalid</span><span class="ruby-operator">:</span> <span class="ruby-value">:replace</span>, <span class="ruby-keyword">undef</span><span class="ruby-operator">:</span> <span class="ruby-value">:replace</span>)
      <span class="ruby-identifier">str</span>.<span class="ruby-identifier">encode!</span>(<span class="ruby-identifier">enc</span>, <span class="ruby-identifier">fallback</span><span class="ruby-operator">:</span> <span class="ruby-operator">-</span><span class="ruby-operator">&gt;</span>(<span class="ruby-identifier">x</span>){<span class="ruby-node">&quot;&amp;#{x.ord};&quot;</span>})
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">str</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/[^*\-.0-9A-Z_a-z]/</span>, <span class="ruby-constant">TBLENCWWWCOMP_</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">US_ASCII</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-extract" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">extract</span><span
            class="method-args">(str, schemes = nil, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h2 id="method-c-extract-label-Synopsis">Synopsis<span><a href="#method-c-extract-label-Synopsis">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>URI::extract(str[, schemes][,&amp;blk])</pre>

<h2 id="method-c-extract-label-Args">Args<span><a href="#method-c-extract-label-Args">&para;</a> <a href="#top">&uarr;</a></span></h2>
<dl class="rdoc-list note-list"><dt><code>str</code>
<dd>
<p>String to extract URIs from.</p>
</dd><dt><code>schemes</code>
<dd>
<p>Limit <a href="URI.html">URI</a> matching to a specific schemes.</p>
</dd></dl>

<h2 id="method-c-extract-label-Description">Description<span><a href="#method-c-extract-label-Description">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Extracts URIs from a string. If block given, iterates through all matched
URIs. Returns nil if block given or array with matches.</p>

<h2 id="method-c-extract-label-Usage">Usage<span><a href="#method-c-extract-label-Usage">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;uri&quot;</span>

<span class="ruby-constant">URI</span>.<span class="ruby-identifier">extract</span>(<span class="ruby-string">&quot;text here http://foo.example.org/bla and here mailto:test@example.com and here also.&quot;</span>)
<span class="ruby-comment"># =&gt; [&quot;http://foo.example.com/bla&quot;, &quot;mailto:test@example.com&quot;]</span>
</pre>
          
          

          
          <div class="method-source-code" id="extract-source">
            <pre><span class="ruby-comment"># File lib/uri/common.rb, line 295</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">extract</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">schemes</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{caller(1)[0]}: warning: URI.extract is obsolete&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$VERBOSE</span>
  <span class="ruby-constant">DEFAULT_PARSER</span>.<span class="ruby-identifier">extract</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">schemes</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-join" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">join</span><span
            class="method-args">(*str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h2 id="method-c-join-label-Synopsis">Synopsis<span><a href="#method-c-join-label-Synopsis">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>URI::join(str[, str, ...])</pre>

<h2 id="method-c-join-label-Args">Args<span><a href="#method-c-join-label-Args">&para;</a> <a href="#top">&uarr;</a></span></h2>
<dl class="rdoc-list note-list"><dt><code>str</code>
<dd>
<p>String(s) to work with, will be converted to RFC3986 URIs before merging.</p>
</dd></dl>

<h2 id="method-c-join-label-Description">Description<span><a href="#method-c-join-label-Description">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Joins URIs.</p>

<h2 id="method-c-join-label-Usage">Usage<span><a href="#method-c-join-label-Usage">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;uri&#39;</span>

<span class="ruby-identifier">p</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;http://example.com/&quot;</span>,<span class="ruby-string">&quot;main.rbx&quot;</span>)
<span class="ruby-comment"># =&gt; #&lt;URI::HTTP:0x2022ac02 URL:http://example.com/main.rbx&gt;</span>

<span class="ruby-identifier">p</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;http://example.com&#39;</span>, <span class="ruby-string">&#39;foo&#39;</span>)
<span class="ruby-comment"># =&gt; #&lt;URI::HTTP:0x01ab80a0 URL:http://example.com/foo&gt;</span>

<span class="ruby-identifier">p</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;http://example.com&#39;</span>, <span class="ruby-string">&#39;/foo&#39;</span>, <span class="ruby-string">&#39;/bar&#39;</span>)
<span class="ruby-comment"># =&gt; #&lt;URI::HTTP:0x01aaf0b0 URL:http://example.com/bar&gt;</span>

<span class="ruby-identifier">p</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;http://example.com&#39;</span>, <span class="ruby-string">&#39;/foo&#39;</span>, <span class="ruby-string">&#39;bar&#39;</span>)
<span class="ruby-comment"># =&gt; #&lt;URI::HTTP:0x801a92af0 URL:http://example.com/bar&gt;</span>

<span class="ruby-identifier">p</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;http://example.com&#39;</span>, <span class="ruby-string">&#39;/foo/&#39;</span>, <span class="ruby-string">&#39;bar&#39;</span>)
<span class="ruby-comment"># =&gt; #&lt;URI::HTTP:0x80135a3a0 URL:http://example.com/foo/bar&gt;</span>
</pre>
          
          

          
          <div class="method-source-code" id="join-source">
            <pre><span class="ruby-comment"># File lib/uri/common.rb, line 267</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">str</span>)
  <span class="ruby-constant">RFC3986_PARSER</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">str</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-parse" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse</span><span
            class="method-args">(uri)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h2 id="method-c-parse-label-Synopsis">Synopsis<span><a href="#method-c-parse-label-Synopsis">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre class="ruby"><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri_str</span>)
</pre>

<h2 id="method-c-parse-label-Args">Args<span><a href="#method-c-parse-label-Args">&para;</a> <a href="#top">&uarr;</a></span></h2>
<dl class="rdoc-list note-list"><dt><code>uri_str</code>
<dd>
<p>String with <a href="URI.html">URI</a>.</p>
</dd></dl>

<h2 id="method-c-parse-label-Description">Description<span><a href="#method-c-parse-label-Description">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Creates one of the URI&#39;s subclasses instance from the string.</p>

<h2 id="method-c-parse-label-Raises">Raises<span><a href="#method-c-parse-label-Raises">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="URI/InvalidURIError.html">URI::InvalidURIError</a></p>

<pre>Raised if URI given is not a correct one.</pre>

<h2 id="method-c-parse-label-Usage">Usage<span><a href="#method-c-parse-label-Usage">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;uri&#39;</span>

<span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-string">&quot;http://www.ruby-lang.org/&quot;</span>)
<span class="ruby-identifier">p</span> <span class="ruby-identifier">uri</span>
<span class="ruby-comment"># =&gt; #&lt;URI::HTTP:0x202281be URL:http://www.ruby-lang.org/&gt;</span>
<span class="ruby-identifier">p</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span>
<span class="ruby-comment"># =&gt; &quot;http&quot;</span>
<span class="ruby-identifier">p</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span>
<span class="ruby-comment"># =&gt; &quot;www.ruby-lang.org&quot;</span>
</pre>

<p>It&#39;s recommended to first ::escape the provided <code>uri_str</code> if
there are any invalid <a href="URI.html">URI</a> characters.</p>
          
          

          
          <div class="method-source-code" id="parse-source">
            <pre><span class="ruby-comment"># File lib/uri/common.rb, line 229</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
  <span class="ruby-constant">RFC3986_PARSER</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-regexp" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">regexp</span><span
            class="method-args">(schemes = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h2 id="method-c-regexp-label-Synopsis">Synopsis<span><a href="#method-c-regexp-label-Synopsis">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre class="ruby"><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-identifier">regexp</span>([<span class="ruby-identifier">match_schemes</span>])
</pre>

<h2 id="method-c-regexp-label-Args">Args<span><a href="#method-c-regexp-label-Args">&para;</a> <a href="#top">&uarr;</a></span></h2>
<dl class="rdoc-list note-list"><dt><code>match_schemes</code>
<dd>
<p>Array of schemes. If given, resulting regexp matches to URIs whose scheme
is one of the match_schemes.</p>
</dd></dl>

<h2 id="method-c-regexp-label-Description">Description<span><a href="#method-c-regexp-label-Description">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Returns a <a href="Regexp.html">Regexp</a> object which matches to URI-like
strings. The <a href="Regexp.html">Regexp</a> object returned by this
method includes arbitrary number of capture group (parentheses).  Never
rely on it&#39;s number.</p>

<h2 id="method-c-regexp-label-Usage">Usage<span><a href="#method-c-regexp-label-Usage">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>require &#39;uri&#39;

# extract first URI from html_string
html_string.slice(URI.regexp)

# remove ftp URIs
html_string.sub(URI.regexp([&#39;ftp&#39;])

# You should not rely on the number of parentheses
html_string.scan(URI.regexp) do |*matches|
  p $&amp;
end</pre>
          
          

          
          <div class="method-source-code" id="regexp-source">
            <pre><span class="ruby-comment"># File lib/uri/common.rb, line 331</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">regexp</span>(<span class="ruby-identifier">schemes</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{caller(1)[0]}: warning: URI.regexp is obsolete&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$VERBOSE</span>
  <span class="ruby-constant">DEFAULT_PARSER</span>.<span class="ruby-identifier">make_regexp</span>(<span class="ruby-identifier">schemes</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-scheme_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">scheme_list</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a <a href="Hash.html">Hash</a> of the defined schemes</p>
          
          

          
          <div class="method-source-code" id="scheme_list-source">
            <pre><span class="ruby-comment"># File lib/uri/common.rb, line 139</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">scheme_list</span>
  <span class="ruby-identifier">@@schemes</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-split" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">split</span><span
            class="method-args">(uri)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h2 id="method-c-split-label-Synopsis">Synopsis<span><a href="#method-c-split-label-Synopsis">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre class="ruby"><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-identifier">split</span>(<span class="ruby-identifier">uri</span>)
</pre>

<h2 id="method-c-split-label-Args">Args<span><a href="#method-c-split-label-Args">&para;</a> <a href="#top">&uarr;</a></span></h2>
<dl class="rdoc-list note-list"><dt><code>uri</code>
<dd>
<p>String with <a href="URI.html">URI</a>.</p>
</dd></dl>

<h2 id="method-c-split-label-Description">Description<span><a href="#method-c-split-label-Description">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Splits the string on following parts and returns array with result:</p>

<pre>* Scheme
* Userinfo
* Host
* Port
* Registry
* Path
* Opaque
* Query
* Fragment</pre>

<h2 id="method-c-split-label-Usage">Usage<span><a href="#method-c-split-label-Usage">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;uri&#39;</span>

<span class="ruby-identifier">p</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;http://www.ruby-lang.org/&quot;</span>)
<span class="ruby-comment"># =&gt; [&quot;http&quot;, nil, &quot;www.ruby-lang.org&quot;, nil, nil, &quot;/&quot;, nil, nil, nil]</span>
</pre>
          
          

          
          <div class="method-source-code" id="split-source">
            <pre><span class="ruby-comment"># File lib/uri/common.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">uri</span>)
  <span class="ruby-constant">RFC3986_PARSER</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">uri</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

